import{l as $,o as E,c as O,a6 as P}from"./framework.BQjydDc4.js";const S={class:"canvas-example"},I={__name:"gomoku",setup(j){const{proxy:B}=P();return $(()=>{const i=document.createElement("canvas");i.width=800,i.height=800,i.style.backgroundColor="green",B.$el.appendChild(i);const n=i.getContext("2d"),r=50,p=i.width;let u=!0;const d=[];let g=!1;const M=()=>{const s=p/r;for(let o=1;o<=s-1;o++)n.moveTo(r,r*o),n.lineTo(p-r,r*o),n.stroke(),n.moveTo(r*o,r),n.lineTo(r*o,p-r),n.stroke(),d.push(new Array(s-1).fill(null))},T=s=>{if(g){console.log(`pk 结束，${u?"黑棋":"白棋"}获胜`),alert(`游戏结束，${u?"黑棋":"白棋"}获胜`);return}const{offsetX:o,offsetY:e}=s,c=r/2;if(o<c||o>p-c||e<c||e>p-c)return;const l=Math.floor((o+c)/r),t=Math.floor((e+c)/r);if(d[t-1][l-1])return;console.log("绘制棋子");const a=l*r,k=t*r;n.beginPath();const h=c-5;n.arc(a,k,h,0,2*Math.PI);const m=a-h/2,b=k-h/2,_=n.createRadialGradient(m,b,0,m,b,h+h/2);_.addColorStop(0,u?"#ccc":"#fff"),_.addColorStop(1,u?"#000":"#666"),n.fillStyle=_,n.shadowColor="#333",n.shadowOffsetX=4,n.shadowOffsetY=4,n.shadowBlur=4,n.fill(),n.closePath();const w=u?"black":"white";if(d[t-1][l-1]=w,C(t-1,l-1,w)){console.log("up=",C(t-1,l-1,w)),console.log(`${w}is win.`),g=!0,alert(`游戏结束，${u?"黑棋":"白棋"}获胜`);return}u=!u},v=(s,o,e)=>d[s]&&d[s][o]&&e===d[s][o],f=(s,o,e,c=1,l="up")=>{let t=s,a=o;return l==="up"?t=s-1:l==="down"?t=s+1:l==="left"?a=o-1:l==="right"?a=o+1:l==="lt-lt"?(t=s-1,a=o-1):l==="lt-rb"?(t=s+1,a=o+1):l==="lb-lb"?(t=s+1,a=o-1):l==="lb-rt"&&(t=s-1,a=o+1),c>=5||!v(t,a,e)?c:v(t,a,e)?(c++,f(t,a,e,c,l)):c},C=(s,o,e)=>{const c=f(s,o,e,1,"up"),l=f(s,o,e,1,"down");console.log(e,"竖向=",c+l-1);const t=f(s,o,e,1,"left"),a=f(s,o,e,1,"right");console.log(e,"横向=",t+a-1);const k=f(s,o,e,1,"lt-lt"),h=f(s,o,e,1,"lt-rb");console.log(e,"左上->右下=",k+h-1);const m=f(s,o,e,1,"lb-lb"),b=f(s,o,e,1,"lb-rt");return console.log(e,"左下->右上=",m+b-1),c+l-1>=5||t+a-1>=5||k+h-1>=5||m+b-1>=5};M(),i.addEventListener("click",T)}),$(()=>{}),(i,n)=>(E(),O("div",S))}};export{I as default};
