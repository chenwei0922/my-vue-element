import{h as $,o as E,c as O,g as P}from"./framework.769053c1.js";const S={class:"canvas-example"},I={__name:"gomoku",setup(j){const{proxy:B}=P();return $(()=>{const i=document.createElement("canvas");i.width=800,i.height=800,i.style.backgroundColor="green",B.$el.appendChild(i);const n=i.getContext("2d"),r=50,p=i.width;let u=!0;const d=[];let v=!1;const M=()=>{const e=p/r;for(let o=1;o<=e-1;o++)n.moveTo(r,r*o),n.lineTo(p-r,r*o),n.stroke(),n.moveTo(r*o,r),n.lineTo(r*o,p-r),n.stroke(),d.push(new Array(e-1).fill(null))},T=e=>{if(v){console.log(`pk 结束，${u?"黑棋":"白棋"}获胜`),alert(`游戏结束，${u?"黑棋":"白棋"}获胜`);return}const{offsetX:o,offsetY:s}=e,c=r/2;if(o<c||o>p-c||s<c||s>p-c)return;const l=Math.floor((o+c)/r),t=Math.floor((s+c)/r);if(d[t-1][l-1])return;console.log("绘制棋子");const a=l*r,_=t*r;n.beginPath();const h=c-5;n.arc(a,_,h,0,2*Math.PI);const k=a-h/2,m=_-h/2,b=n.createRadialGradient(k,m,0,k,m,h+h/2);b.addColorStop(0,u?"#ccc":"#fff"),b.addColorStop(1,u?"#000":"#666"),n.fillStyle=b,n.shadowColor="#333",n.shadowOffsetX=4,n.shadowOffsetY=4,n.shadowBlur=4,n.fill(),n.closePath();const g=u?"black":"white";if(d[t-1][l-1]=g,C(t-1,l-1,g)){console.log("up=",C(t-1,l-1,g)),console.log(`${g}is win.`),v=!0,alert(`游戏结束，${u?"黑棋":"白棋"}获胜`);return}u=!u},w=(e,o,s)=>d[e]&&d[e][o]&&s===d[e][o],f=(e,o,s,c=1,l="up")=>{let t=e,a=o;return l==="up"?t=e-1:l==="down"?t=e+1:l==="left"?a=o-1:l==="right"?a=o+1:l==="lt-lt"?(t=e-1,a=o-1):l==="lt-rb"?(t=e+1,a=o+1):l==="lb-lb"?(t=e+1,a=o-1):l==="lb-rt"&&(t=e-1,a=o+1),c>=5||!w(t,a,s)?c:w(t,a,s)?(c++,f(t,a,s,c,l)):c},C=(e,o,s)=>{const c=f(e,o,s,1,"up"),l=f(e,o,s,1,"down");console.log(s,"竖向=",c+l-1);const t=f(e,o,s,1,"left"),a=f(e,o,s,1,"right");console.log(s,"横向=",t+a-1);const _=f(e,o,s,1,"lt-lt"),h=f(e,o,s,1,"lt-rb");console.log(s,"左上->右下=",_+h-1);const k=f(e,o,s,1,"lb-lb"),m=f(e,o,s,1,"lb-rt");return console.log(s,"左下->右上=",k+m-1),c+l-1>=5||t+a-1>=5||_+h-1>=5||k+m-1>=5};M(),i.addEventListener("click",T)}),$(()=>{}),(i,n)=>(E(),O("div",S))}};export{I as default};
